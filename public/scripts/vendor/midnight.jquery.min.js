/*!
 * Midnight.js 1.0.3
 * jQuery plugin to switch between multiple fixed header designs on the fly, so it looks in line with the content below it.
 * http://aerolab.github.io/midnight.js/
 *
 * Copyright (c) 2014 Aerolab <info@aerolab.co>
 *
 * Released under the MIT license
 * http://aerolab.github.io/midnight.js/LICENSE.txt
 */
!function(e){"use strict";e.fn.midnight=function(t){return"object"!=typeof t&&(t={}),this.each(function(){var s={headerClass:"midnightHeader",innerClass:"midnightInner",defaultClass:"default",classPrefix:""};e.extend(s,t);var n=window.pageYOffset||document.documentElement.scrollTop,r=e(document).height(),a=e(this),o={},i={top:0,height:a.outerHeight()},l=e("[data-midnight]"),f=[],d=function(){for(var e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t=0;t<e.length;t++)if(void 0!==document.createElement("div").style[e[t]])return e[t];return!1},m=d();if(0!=l.length){var h=function(){var t=a.find("> ."+s.headerClass),n=0,r=0;return t.length?t.each(function(){var t=e(this),a=t.find("> ."+s.innerClass);a.length?(a.css("bottom","auto"),r=a.outerHeight(),a.css("bottom","0")):(t.css("bottom","auto"),r=t.outerHeight(),t.css("bottom","0")),n=r>n?r:n}):n=r=a.outerHeight(),n},c=function(){i.height=h(),a.css("height",i.height+"px")},u=function(){o["default"]={},l.each(function(){var t=e(this),s=t.data("midnight");"string"==typeof s&&(s=s.trim(),""!==s&&(o[s]={}))});({top:a.css("padding-top"),right:a.css("padding-right"),bottom:a.css("padding-bottom"),left:a.css("padding-left")});a.css({position:"fixed",top:0,left:0,right:0,overflow:"hidden"}),c();var t=a.find("> ."+s.headerClass);t.length?t.filter("."+s.defaultClass).length||t.filter("."+s.headerClass+":first").clone(!0,!0).attr("class",s.headerClass+" "+s.defaultClass):a.wrapInner('<div class="'+s.headerClass+" "+s.defaultClass+'"></div>');var t=a.find("> ."+s.headerClass),n=t.filter("."+s.defaultClass).clone(!0,!0);for(var r in o)if(o.hasOwnProperty(r)&&"undefined"==typeof o[r].element){var i=t.filter("."+r);o[r].element=i.length?i:n.clone(!0,!0).removeClass(s.defaultClass).addClass(r).appendTo(a);var f={position:"absolute",overflow:"hidden",top:0,left:0,right:0,bottom:0};o[r].element.css(f),m!==!1&&o[r].element.css(m,"translateZ(0)"),o[r].element.find("> ."+s.innerClass).length||o[r].element.wrapInner('<div class="'+s.innerClass+'"></div>'),o[r].inner=o[r].element.find("> ."+s.innerClass),o[r].inner.css(f),m!==!1&&o[r].inner.css(m,"translateZ(0)"),o[r].from="",o[r].progress=0}t.each(function(){var t=e(this),n=!1;for(var r in o)o.hasOwnProperty(r)&&t.hasClass(r)&&(n=!0);t.find("> ."+s.innerClass).length||t.wrapInner('<div class="'+s.innerClass+'"></div>'),n||t.hide()})};u();var p=function(){r=e(document).height(),f=[];for(var t=0;t<l.length;t++){var s=e(l[t]);f.push({element:s,className:s.data("midnight"),start:s.offset().top,end:s.offset().top+s.outerHeight()})}};setInterval(p,1e3);var g=function(){n=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,n=Math.max(n,0),n=Math.min(n,r);var e=i.height,t=n+i.top,s=n+i.top+e;for(var a in o)o.hasOwnProperty(a)&&(o[a].from="",o[a].progress=0);for(var l=0;l<f.length;l++)s>=f[l].start&&t<=f[l].end&&(o[f[l].className].visible=!0,t>=f[l].start&&s<=f[l].end?(o[f[l].className].from="top",o[f[l].className].progress+=1):s>f[l].end&&t<f[l].end?(o[f[l].className].from="top",o[f[l].className].progress=1-(s-f[l].end)/e):s>f[l].start&&t<f[l].start&&("top"===o[f[l].className].from?o[f[l].className].progress+=(s-f[l].start)/e:(o[f[l].className].from="bottom",o[f[l].className].progress=(s-f[l].start)/e)))},v=function(){var e=0,t="";for(var n in o)o.hasOwnProperty(n)&&""!==!o[n].from&&(e+=o[n].progress,t=n);1>e&&(""===o[s.defaultClass].from?(o[s.defaultClass].from="top"===o[t].from?"bottom":"top",o[s.defaultClass].progress=1-e):o[s.defaultClass].progress+=1-e);for(var r in o)if(o.hasOwnProperty(r)&&""!==!o[r].from){var a=100*(1-o[r].progress);"top"===o[r].from?m!==!1?(o[r].element[0].style[m]="translateY(-"+a+"%) translateZ(0)",o[r].inner[0].style[m]="translateY(+"+a+"%) translateZ(0)"):(o[r].element[0].style.top="-"+a+"%",o[r].inner[0].style.top="+"+a+"%"):m!==!1?(o[r].element[0].style[m]="translateY(+"+a+"%) translateZ(0)",o[r].inner[0].style[m]="translateY(-"+a+"%) translateZ(0)"):(o[r].element.style.top="+"+a+"%",o[r].inner.style.top="-"+a+"%")}};e(window).resize(function(){p(),c(),g(),v()}).trigger("resize");var w=window.requestAnimationFrame||function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),C=function(){w(C),g(),v()};C()}})}}(jQuery);